C51 COMPILER V9.56.0.0   MAIN                                                              07/18/2024 20:40:20 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Keil_c51v956\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Device;.\System;.\Listings
                    -;.\Objects) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "System.h"
*** WARNING C323 IN LINE 1 OF .\Device\BTM.h: newline expected, extra characters found
   2          
   3          
   4          
   5          //独立按键  
   6           //光敏电阻    
   7          u8 key_value =0;
   8          u8 count_time = 0;
   9          void BTN_Process(){
  10   1                      if(count_time == 5){
  11   2                              vBTN_Read_State();     
  12   2                              count_time = 0;
  13   2                              
  14   2                      } 
  15   1      }
  16          
  17          //矩阵按键
  18          //u8 key_value =0;
  19          //u8 count_time = 0;
  20          //void KBD_Process(){
  21          //              if(count_time == 10){
  22          //                      key_value =  vKBD_Read_State();          
  23          //                      count_time = 0;
  24          //                      
  25          //              } 
  26          //}
  27          
  28          
  29          
  30          u8 ch1 = 0;
  31          u8 count_time2;
  32          void vADC_Process(){
  33   1              if(count_time2 == 10){
  34   2                      vRead_ADC(0x41);
  35   2                      ch1 = vRead_ADC(0x41);
  36   2                      if(ch1 < 125){
  37   3                              vDeviceCtrl(0x80,0xfe);
  38   3                      }else{
  39   3                              vDeviceCtrl(0x80,0xff);
  40   3                      }
  41   2                      count_time2 = 0;
  42   2      
  43   2              }
  44   1                      
  45   1      }
  46           
  47          
  48          //数码管
  49          void vSMG_Process(){
  50   1              smg_buf[0] = 0x00;
  51   1              smg_buf[1] = smg_code[0]|0x80;
  52   1              smg_buf[2] = smg_code[5];
  53   1              smg_buf[3] = smg_code[0];
C51 COMPILER V9.56.0.0   MAIN                                                              07/18/2024 20:40:20 PAGE 2   

  54   1              
  55   1              if(m == 1){
  56   2              n = total;
  57   2              }
  58   1              if(m == 0){
  59   2              n = money;
  60   2              total = 0;
  61   2              }
  62   1              smg_buf[4] = smg_code[n/1000];
  63   1              smg_buf[5] = smg_code[n/100%10]|0x80 ;
  64   1              smg_buf[6] = smg_code[n/10%10];
  65   1              smg_buf[7] = smg_code[n%10];
  66   1      //      smg_buf[5] = smg_code[ch1/100];
  67   1      //      smg_buf[6] = smg_code[ch1/10%10];
  68   1      //      smg_buf[7] = smg_code[ch1%10];
  69   1      }
  70          
  71          u16 count_time3;
  72          void main(){
  73   1              vSystem_Init();
  74   1              Timer2_Init();                        //--------定时器要加
  75   1              
  76   1              while(1){
  77   2                      BTN_Process();
  78   2                      vSMG_Process();
  79   2                      vADC_Process();
  80   2                      if(m == 1){
  81   3                              if(count_time3 >= 100){
  82   4                                      total += 10;
  83   4                                      money = total*0.5;
  84   4                                      count_time3 = 0;
  85   4                              }
  86   3                      }
  87   2                      
  88   2                      
  89   2              }
  90   1      }
  91          
  92          
  93          
  94          //中断服务函数
  95          void Timer2() interrupt 12{
  96   1                      count_time++;
  97   1                      count_time2++;
  98   1                      count_time3++;
  99   1                      vSMG_Display();
 100   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    325    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
